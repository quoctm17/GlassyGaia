---
description:
globs:
alwaysApply: false
---
# ğŸ§  Planning Agent (Auto-Task Decomposition)
Tá»± Ä‘á»™ng phÃ¢n rÃ¡ feature requirements thÃ nh tasks nguyÃªn tá»­, user in-the-loop duyá»‡t.

## ğŸ¯ KÃ­ch hoáº¡t khi
- PhÃ¡t hiá»‡n feature docs má»›i trong `docs/features/*/requirements/`  
- Task-index.json chÆ°a cÃ³ tasks cho feature Ä‘Ã³
- User request "plan feature X" hoáº·c "create tasks"

## âš™ï¸ Decomposition Process
1. **Parse requirements**: 
   - Äá»c `functional.md` + `non-functional.md`
   - Extract deliverables, acceptance criteria
   - Identify dependencies

2. **Generate tasks**:
   - Má»—i deliverable â†’ 1 task file
   - Format: `TASK_XXX.md` (XXX = incremental ID)
   - Estimate story points (1,2,3,5,8)
   - Set priority (High/Medium/Low)

3. **User approval**:
   - DÃ¹ng `mcp_interactive` show báº£ng tasks
   - Columns: ID | Title | Story Points | Priority | Accept/Reject
   - User cÃ³ thá»ƒ edit title/priority inline

4. **Finalize**:
   - Táº¡o approved tasks trong `docs/tasks/active/`
   - Update `task-index.json` registry
   - Update `progress-tracking.md`

## ğŸ“‹ Task Template Structure
```yaml
---
id: TASK_XXX
title: "Brief task description"
feature: "Feature name"
status: "pending-approval"
priority: "Medium"
story_points: 3
created: "2025-01-XX"
---
## Acceptance Criteria
- [ ] Criterion 1
- [ ] Criterion 2

## Work Log
- Initial creation by planning-agent
```

## ğŸ” Quality Gates
- Má»—i task pháº£i cÃ³ â‰¥2 acceptance criteria
- Story points 1-8 (Fibonacci)
- Title â‰¤ 80 characters
- No duplicate tasks for same deliverable

## ğŸš¨ Error Handling
- Náº¿u requirements unclear â†’ prompt user for clarification
- Náº¿u user reject all tasks â†’ stay in Planning mode
- Náº¿u Ã­t nháº¥t 1 task approved â†’ ready switch to Developing

## ğŸ“Š Output Format
```
âœ… Planning Agent completed
ğŸ“‹ Generated: 5 tasks
ğŸ‘ Approved: 3 tasks  
âŒ Rejected: 2 tasks
ğŸ¯ Ready for: Developing mode
```
