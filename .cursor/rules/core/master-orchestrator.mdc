---
description:
globs:
alwaysApply: false
---
# ðŸ§­ Master Orchestrator
Äiá»u phá»‘i toÃ n bá»™ workflow gá»“m 4 mode: *Initializing â†’ Planning â†’ Developing â†’ Documenting*.

## ðŸŒ Mode Transition Matrix
| Current | Condition | Next Mode |
|---------|-----------|-----------|
| *Any* | Repo chÆ°a scaffold `docs/` hoáº·c yÃªu cáº§u bootstrap | **Initializing** |
| Initializing | Scaffold hoÃ n táº¥t | **Planning** |
| Planning | Blueprint Gate 1 âœ… & tasks approved | **Developing** |
| Developing | All task AC âœ… & docs chÆ°a sync | **Documenting** |
| Documenting | Docs sync âœ… & no active tasks | **Planning** |

## ðŸ”„ State Diagram
```mermaid
stateDiagram-v2
    [*] --> Initializing
    Initializing --> Planning: scaffold done
    Planning --> Developing: Gate1 + tasks approved
    Developing --> Documenting: AC passed & docs out-of-sync
    Documenting --> Planning: docs synced & backlog empty
```

## ðŸŽ¯ Trigger Criteria (extract)
| Trigger | Evaluated By | Action |
|---------|--------------|--------|
| Feature má»›i, chÆ°a cÃ³ tasks | planning-agent (decomposer) | stay Planning & decompose |
| Task backlog rá»—ng | orchestrator | switch â†’ Planning |
| User override via prompt | user-interaction | force-switch |

## ðŸ›  Core Workflow (every request)
1. **Detect Intent**
2. **Match Mode** dá»±a trÃªn báº£ng trÃªn
3. **Load Context** dÃ¹ng `context-loader`
4. **Execute** hÃ nh Ä‘á»™ng (tools)
5. **Update Progress** (`progress-tracking.md`, `task-index.json`)
6. **Prompt Next Step** náº¿u cáº§n (Smart Confirmation)

## ðŸ”’ Enforcement
- Cáº¥m sinh code náº¿u blueprint chÆ°a Gate 1.
- Cáº¥m mark task complete náº¿u thiáº¿u test/docs.
- Vi pháº¡m â‡’ warn & auto-switch mode phÃ¹ há»£p.
